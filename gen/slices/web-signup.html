<section class="Section SignUp">
  <div class="SignUp__copy">
    <a href="/">
      <h2 class="SignUp__heading">%top-title%</h2>
    </a>
    <p class="SignUp__subheading">%tag-line%</p>
  </div>
  <div class="SignUp__cta">
    <button class="SignUp__button" id="signup-cta">
      Sign up
      <img src="./assets/signup-bird.png" class="SignUp__bird" />
    </button>
  </div>
</section>

<div class="SignUpForm" id="form">
  <div
    class="SignUpForm__scrim"
    aria-label="Close the signup modal"
    id="modal-scrim"
  ></div>
  <div class="SignUpForm__content">
    <button class="SignUpForm__close-button" id="close-signup">
      <img src="./assets/close.png" alt="Close the signup modal" />
    </button>
    <iframe
      class="SignUpForm__iframe"
      data-w-type="embedded"
      frameborder="0"
      scrolling="no"
      marginheight="0"
      marginwidth="0"
      src="https://s0jyz.mjt.lu/wgt/s0jyz/8rn/form?c=8b556ff9"
      width="100%"
      style="height: 475px"
    ></iframe>

    <script
      type="text/javascript"
      src="https://app.mailjet.com/pas-nc-embedded-v1.js"
    ></script>
  </div>
</div>

<div class="ConfirmationPopup" id="confirmation">
  <div
    class="ConfirmationPopup__scrim"
    aria-label="Close the signup modal"
    id="confirmation-modal-scrim"
  ></div>
  <div class="ConfirmationPopup__content">
    <button class="ConfirmationPopup__close-button" id="close-confirmation">
      <img src="./assets/close.png" alt="Close the confirmation modal" />
    </button>

    <div class="ConfirmationPopup__left-column">
      <img
        src="./assets/masha_confirmation.png"
        alt="Masha sitting on her ledge, appreciating you"
        width="316"
        height="364"
      />
    </div>
    <div class="ConfirmationPopup__right-column">
      <img
        class="ConfirmationPopup__heart"
        src="./assets/heart.png"
        alt=""
        height="39"
        width="34"
      />
      <h2 class="ConfirmationPopup__heading">
        Thank you for confirming your email address! <br />
      </h2>
      <p class="ConfirmationPopup__sub-heading">
        Stay tuned for the silliest pigeon newsletter.
      </p>
      <button class="ConfirmationPopup__close" id="close-confirmation-button">
        Close
      </button>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = {};
    form.OpenModalButton = document.querySelector("#signup-cta");
    form.CloseModalButton = document.querySelector("#close-signup");
    form.ModalScrim = document.querySelector("#modal-scrim");

    form.container = document.querySelector("#form");
    const classToToggle = "SignUpForm--show";

    form.OpenModalButton.addEventListener("click", () => {
      form.container.classList.add(classToToggle);
    });

    const close = () => {
      form.container.classList.remove(classToToggle);
    };

    form.CloseModalButton.addEventListener("click", close);
    form.ModalScrim.addEventListener("click", close);
  });

  document.addEventListener("DOMContentLoaded", () => {
    const confirmation = document.querySelector("#confirmation");

    if (/confirm/gi.test(window.location.search)) {
      confirmation.classList.add("ConfirmationPopup--show");
    }

    const close = () => {
      confirmation.classList.remove("ConfirmationPopup--show");
    };
    document
      .querySelector("#confirmation-modal-scrim")
      .addEventListener("click", close);
    document
      .querySelector("#close-confirmation")
      .addEventListener("click", close);
    document
      .querySelector("#close-confirmation-button")
      .addEventListener("click", close);
  });
</script>
